define("mod_groupproject/add_users",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.sendData=_exports.initilaiseForm=_exports.init=_exports.generateFormElement=_exports.addFormElement=void 0;_exports.init=(users,roles,size,contextid,groupid,groupusers)=>{$((function(){const user_view=$("#user_view");user_view.append('<button id="add_line" class="btn btn-outline-secondary btn-sm text-nowrap" style="margin-bottom: 20px"> Új Felhasználó</button>'),user_view.append("<br>"),user_view.append('<button id="send_data" class="btn btn-success btn-sm text-nowrap" style="margin-bottom: 20px"> Felhasználók hozzáadása</button>'),initilaiseForm(users,roles,groupusers),$(".form_element").length>=size?$("#add_line").prop("disabled",!0):0===$(".form_element").length&&addFormElement(users,roles),$("#add_line").click((function(){addFormElement(users,roles),$(".form_element").length>=size&&$("#add_line").prop("disabled",!0)})),$("#send_data").click((function(){sendData(contextid,groupid)}))}))};const initilaiseForm=(users,roles,groupusers)=>{let i=0;for(const[key,value]of Object.entries(groupusers)){const generated_div=generateFormElement(users,roles);$(generated_div).insertBefore($("#add_line")),$(".users:eq(".concat(i,")")).val(value.userid).change(),$(".roles:eq(".concat(i,")")).val(value.roleid).change(),i++}$(".delete_row").click((function(event){event.preventDefault(),$(this).closest("div").remove(),$("#add_line").prop("disabled",!1)}))};_exports.initilaiseForm=initilaiseForm;const addFormElement=(users,roles)=>{$(generateFormElement(users,roles)).insertBefore($("#add_line")),$(".delete_row").click((function(event){event.preventDefault(),$(this).closest("div").remove(),$("#add_line").prop("disabled",!1)}))};_exports.addFormElement=addFormElement;const generateFormElement=(users,roles)=>{let user_options="",role_options="";for(const[key,value]of Object.entries(users)){let name=value.lastname+" "+value.firstname,id=value.id;user_options+="<option value=".concat(id,">").concat(name,"</option>")}for(const[key,value]of Object.entries(roles)){let name=value.name,id=value.id;role_options+="<option value=".concat(id,">").concat(name,"</option>")}return'<div style="margin-bottom: 20px" class="form_element"><label for="users">Felhasználó</label>\n\n<select name="users" id="users" class="custom-select users" style="margin-right: 20px">\n'+user_options+'</select><label for="roles">Szerepkör</label>\n\n<select name="roles" id="roles" class="custom-select roles" style="margin-right: 20px">\n'+role_options+'</select><a class="action-icon delete_row"><i class="icon fa fa-trash fa-fw " title="Delete" role="img" aria-label="Delete"></i></a><br> </div>'};_exports.generateFormElement=generateFormElement;const sendData=(contextid,groupid)=>{const formData=$("#user_view div");let sendArray=[];$.each(formData,(function(i,v){const div=$(v),userid=div.find("#users").val(),roleid=div.find("#roles").val();sendArray.push({userid:userid,roleid:roleid})}));const json=JSON.stringify(sendArray);$('<form action="/mod/groupproject/user.php?id='.concat(contextid,"&groupid=").concat(groupid,'" method="post">\n        <input type="hidden" name="jQueryData" value=\'').concat(json,"'>\n        </form>")).appendTo("body").submit()};_exports.sendData=sendData}));

//# sourceMappingURL=add_users.min.js.map