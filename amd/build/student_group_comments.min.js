define("mod_groupproject/student_group_comments",["exports","./repository"],(function(_exports,_repository){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.commentWritten=void 0;_exports.init=(self,userid,groupid)=>{$((function(){var objDiv=document.getElementById("comments");objDiv.scrollTop=objDiv.scrollHeight,$("#id_submit").click((async function(event){event.preventDefault(),Number.prototype.padLeft=function(base,chr){var len=String(base||10).length-String(this).length+1;return len>0?new Array(len).join(chr||"0")+this:this},$("#comments").append(commentWritten(self,tinyMCE.activeEditor.getContent(),formatDate(),"own")),await(0,_repository.postComment)(userid,groupid,tinyMCE.activeEditor.getContent()),tinyMCE.activeEditor.setContent("");var objDiv=document.getElementById("comments");objDiv.scrollTop=objDiv.scrollHeight})),window.setInterval((async function(){(await(0,_repository.getComments)($(".bubbleWrapper").length,userid,groupid)).forEach((comment=>{$("#comments").append(commentWritten(comment.userpix,comment.message,comment.time,comment.side));var objDiv=document.getElementById("comments");objDiv.scrollTop=objDiv.scrollHeight}))}),1e4)}))};const commentWritten=(self,comment,time,user)=>'<div class="bubbleWrapper">\n'+'                    <div class="inlineContainer '.concat(user,'">\n')+"                        ".concat(self)+'                        <div class="'.concat(user,"Bubble ").concat(user,'">\n')+"                            ".concat(comment,"\n")+"                        </div>\n                    </div>\n"+'                    <span class="'.concat(user,'">\n')+"                        ".concat(time,"\n")+"                    </span>\n                </div>";_exports.commentWritten=commentWritten;const formatDate=()=>{Number.prototype.padLeft=function(base,chr){var len=String(base||10).length-String(this).length+1;return len>0?new Array(len).join(chr||"0")+this:this};const now=new Date;return[now.getFullYear().padLeft(),now.getMonth()+1,now.getDate().padLeft()].join(".")+" "+[now.getHours().padLeft(),now.getMinutes().padLeft()].join(":")}}));

//# sourceMappingURL=student_group_comments.min.js.map