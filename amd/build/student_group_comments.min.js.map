{"version":3,"file":"student_group_comments.min.js","sources":["../src/student_group_comments.js"],"sourcesContent":["/*global $ tinyMCE */\r\n/*eslint no-undef: \"error\"*/\r\n/*eslint no-extend-native: [\"error\", { \"exceptions\": [\"Number\"] }]*/\r\n\r\nimport {getComments, postComment} from './repository';\r\n\r\nexport const init = (self, userid, groupid) => {\r\n    $(function() {\r\n        var objDiv = document.getElementById(\"comments\");\r\n        objDiv.scrollTop = objDiv.scrollHeight;\r\n        $('#id_submit').click(async function(event) {\r\n            event.preventDefault();\r\n            Number.prototype.padLeft = function(base,chr){\r\n                var  len = (String(base || 10).length - String(this).length)+1;\r\n                return len > 0? new Array(len).join(chr || '0')+this : this;\r\n            };\r\n            $('#comments').append(commentWritten(self, tinyMCE.activeEditor.getContent(), formatDate(), 'own'));\r\n            await postComment(userid, groupid, tinyMCE.activeEditor.getContent());\r\n            tinyMCE.activeEditor.setContent('');\r\n            var objDiv = document.getElementById(\"comments\");\r\n            objDiv.scrollTop = objDiv.scrollHeight;\r\n        });\r\n        window.setInterval(async function(){\r\n            const comments = await getComments($('.bubbleWrapper').length,userid, groupid);\r\n            comments.forEach(comment => {\r\n                $('#comments').append(commentWritten(comment.userpix, comment.message, comment.time, comment.side));\r\n                var objDiv = document.getElementById(\"comments\");\r\n                objDiv.scrollTop = objDiv.scrollHeight;\r\n            });\r\n        }, 10000);\r\n    });\r\n};\r\n\r\nexport const commentWritten = (self, comment, time, user) => {\r\n    return '<div class=\"bubbleWrapper\">\\n' +\r\n        `                    <div class=\"inlineContainer ${user}\">\\n` +\r\n        `                        ${self}` +\r\n        `                        <div class=\"${user}Bubble ${user}\">\\n` +\r\n        `                            ${comment}\\n` +\r\n        '                        </div>\\n' +\r\n        '                    </div>\\n' +\r\n        `                    <span class=\"${user}\">\\n` +\r\n        `                        ${time}\\n` +\r\n        '                    </span>\\n' +\r\n        '                </div>';\r\n};\r\n\r\nconst formatDate = () => {\r\n    Number.prototype.padLeft = function(base,chr){\r\n        var  len = (String(base || 10).length - String(this).length)+1;\r\n        return len > 0? new Array(len).join(chr || '0')+this : this;\r\n    };\r\n    const now = new Date;\r\n    return [now.getFullYear().padLeft(),\r\n            now.getMonth()+1,\r\n            now.getDate().padLeft()].join('.') +' ' +\r\n            [now.getHours().padLeft(),\r\n            now.getMinutes().padLeft()].join(':');\r\n};\r\n"],"names":["self","userid","groupid","$","objDiv","document","getElementById","scrollTop","scrollHeight","click","async","event","preventDefault","Number","prototype","padLeft","base","chr","len","String","length","this","Array","join","append","commentWritten","tinyMCE","activeEditor","getContent","formatDate","setContent","window","setInterval","forEach","comment","userpix","message","time","side","user","now","Date","getFullYear","getMonth","getDate","getHours","getMinutes"],"mappings":"+NAMoB,CAACA,KAAMC,OAAQC,WAC/BC,GAAE,eACMC,OAASC,SAASC,eAAe,YACrCF,OAAOG,UAAYH,OAAOI,aAC1BL,EAAE,cAAcM,OAAMC,eAAeC,OACjCA,MAAMC,iBACNC,OAAOC,UAAUC,QAAU,SAASC,KAAKC,SAChCC,IAAOC,OAAOH,MAAQ,IAAII,OAASD,OAAOE,MAAMD,OAAQ,SACtDF,IAAM,EAAG,IAAII,MAAMJ,KAAKK,KAAKN,KAAO,KAAKI,KAAOA,MAE3DlB,EAAE,aAAaqB,OAAOC,eAAezB,KAAM0B,QAAQC,aAAaC,aAAcC,aAAc,cACtF,2BAAY5B,OAAQC,QAASwB,QAAQC,aAAaC,cACxDF,QAAQC,aAAaG,WAAW,QAC5B1B,OAASC,SAASC,eAAe,YACrCF,OAAOG,UAAYH,OAAOI,gBAE9BuB,OAAOC,aAAYtB,wBACQ,2BAAYP,EAAE,kBAAkBiB,OAAOnB,OAAQC,UAC7D+B,SAAQC,UACb/B,EAAE,aAAaqB,OAAOC,eAAeS,QAAQC,QAASD,QAAQE,QAASF,QAAQG,KAAMH,QAAQI,WACzFlC,OAASC,SAASC,eAAe,YACrCF,OAAOG,UAAYH,OAAOI,kBAE/B,eAIEiB,eAAiB,CAACzB,KAAMkC,QAASG,KAAME,OACzC,0FACgDA,+CACxBvC,oDACYuC,uBAAcA,mDACtBL,cAJ5B,0GAOiCK,+CACTF,WARxB,mGAaLR,WAAa,KACfhB,OAAOC,UAAUC,QAAU,SAASC,KAAKC,SAChCC,IAAOC,OAAOH,MAAQ,IAAII,OAASD,OAAOE,MAAMD,OAAQ,SACtDF,IAAM,EAAG,IAAII,MAAMJ,KAAKK,KAAKN,KAAO,KAAKI,KAAOA,YAErDmB,IAAM,IAAIC,WACT,CAACD,IAAIE,cAAc3B,UAClByB,IAAIG,WAAW,EACfH,IAAII,UAAU7B,WAAWQ,KAAK,KAAM,IACpC,CAACiB,IAAIK,WAAW9B,UAChByB,IAAIM,aAAa/B,WAAWQ,KAAK"}